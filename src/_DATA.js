let users = {
  sarahedo: {
    id: "sarahedo",
    name: "Sarah Edo",
    avatarURL: "https://pngimage.net/wp-content/uploads/2018/06/png-1-4.png",
    answers: {
      "8xf0y6ziyjabvozdd253nd": "optionOne",
      "6ni6ok3ym7mf1p33lnez": "optionTwo",
      am8ehyc8byjqgar0jgpub9: "optionTwo",
      loxhs1bqm25b708cmbf3g: "optionTwo",
    },
    questions: ["8xf0y6ziyjabvozdd253nd", "am8ehyc8byjqgar0jgpub9"],
  },
  tylermcginnis: {
    id: "tylermcginnis",
    name: "Tyler McGinnis",
    avatarURL:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX///8AAADAwMD6+vr39/fo6Ojy8vJ9fX3h4eHY2Njv7+/s7OxTU1OwsLC8vLz19fWfn58YGBjR0dFfX1/KysqGhoaNjY1vb29paWl1dXVGRkbV1dVAQEBkZGQVFRWcnJwiIiIzMzMqKiqzs7NMTExXV1dDQ0M4ODgeHh4mJiaVlZWoqKiBgYELCwsXFxc1jv2FAAAN0UlEQVR4nNVd60LqvBIVSqGUi1wKiiJYCoog5/0f74hsZE0yLW2u/da/vdUk00zmnsnDgws89qJJMswGx9FoPToeB1kzeY16LSdz20XQex0cnl42qwaHcbp9Wmfdnu9VqiLKZrsvljIRm+l8GPpebjW0k/WuFG2It9HkP8K23VH/VJm8C1bTY+R7+feQfG8UqbtiOZ/4JiIXQbLQpO6KWS2J7M7eDdF3Rnqom+gZbA2Sd8F06JuoG6KZcfIuONRDVb6+WaLvjCf/sjUpp/jel/3p0+J7NpvP57NZZ/E07S/3pf7y7dUvfS/3Frh5m2eTHGYLekk2m961e/r+JGu3WLxsnkd5tBH0kvVzsRad+uHV8LlgTatFRUszyha8eX7Bwr3Mac3zl7MbqCmz6FhwqNeBYQruYJir3p+HbY1x42yaN/DGpX7s5S1jq0XeBe0sT3y9OWPVUc5HXptaQXjIYZGRoQmKEfESdNo0OUnQ5I/k1oFUPbIzd8zP3H1iZzoan4iizZ7Auf7p4xB/c5PtYiuT/UPCnY+5vSl7nE2/T6zNx4qYjl0BF3K8urY0WYtxIqb2HdWIkTk7KzGrULYdU4v8AmjKM39ZkKmJ/CXn5mfhETAmolHldIasJPouDX5GCRs+jAdpAjfmxQ2ylJuZHF5STEv3Hlv0KS7i2dzgkpp3dgIJpNO4NTRwIBK4ciNCZSRiumD7aGRcUR8trZpNhYiX4lpMKMYPYdCOgTHVIZpxG20SA3EHbdv29zAQd1GXUcUz6OsI3iCaHh96ARyBwL3/EPSP+ShEWF90BhP0YOpPxiDaKV2Whl4ULJmPumShHwWR+q06kHCo+yYXqYdACMcp2qgTOsrO7CL1EAg6TMnTCGtM4I87LpCoIAKDtM4ESoy6r64WachCSyLbQUtzC6g7lpqxcM0ipoG/Q7W/plJmXw89KKJHs8iVpE2bfp46WDIcIrLKVZV9oIfQeNDHGCirVTiKNOzk25sowpCstHTsiGpCv/7gPdDIRtnj1Mc/+rS6QH0QtVgycEMVRT3KkvLRHlfm0541KRPEvbD7gyjsxebcFOoRl8mjEDlqKuraTtZPW/RcV5/9xbFrZGwSupne/30inVITKwiSWW5B0HRgQNcSb/FuxUaLhAgMfOTXxZ36tX6my7FE8X/dG4249RVNPQa5lSOIk26WfF1h0UTMaDsUw3Llhz+Y6+0jyUwVS3+SU9Y8IlG/UR57rYonwqeLot/s4m9qytGcuqJcPOvEPYlpUyQ98KtvtCKtrdz6tFzsNeRagNK6wAInproW2/SUrl1omBdNHCe/5BYPrFbsMBw3lKBBIuZXctdOtlBHzISq14I0SCTCJm8T8eg8KU/1cyjKXVljoX4W8cJOju1GBKlOJVB1IXPDWFm+Ea+W50Cs29bRFHLdxj+sntdZ8uNbJMPRQio7uEI9zYIWOMuC5BtoeIXdBo/OhGxPdMgRt8pHMcZROB7ET6+czPkBvzuc6TlgJa66HsZN5KxTnEUjPipmoX/xksMTLEMr1yK1cRT5xxn8VEOQBlwFan4wa8Jto/LkHRhENlhQY2qYT9wWFtUXiSnrMzLVyVEnSqZb4Q8rgBEfxQVUbfmqjHqpE+opUWHgiTBlHl5wL97KyF5lewqjUqKsgW+/UR3/gVP2y7t/Ixd2qkfZ09sgQowJTVKNws12Q0IJzSpFOkoEzHKATik1Tr+rrSkPspwpE+qRyo/VTTf8xFSpww903Cap1v1UKv4iiSd1xwZVAv4/MqmG59uSvKZyhajSSVRfA4o6ZFMIc5w0Etqv4kpLbkYk/pl6iXULlA+6DxA11nEMpWNYMnHVEqOOGq7Ngp0dv6FOKkYqBy9bLZ0Kf1cYECwGsumNg/Ac6ISfo+w4X0y3n+/X81j2prlY+qtRi9eCYW56FfT0m/rYNwTtS9ek0gamWIesswpw5P/0Kp7OgcbY6hB1vs49A3CS/qQmikA/LUXEPdQ4hyT1ctUXcAy/TKy3OsRzqJVQAPvhqnXAEtEJX2ggFSjUSutBMOPqB8LQfnrCSPpQq4QH9cXlf5Bx/RxDyabRqo+Q6QGajeTtq2MtUqiXuYRo34UnwSjVMdnMLOkXK72MMBhuF5EF+t5PCZvEpJp30kA3XEQNSFc/vW6kJmia10Mh8vN19qXxYHqplO2JBOoWuTzCUOeABVCsE4NSh+SRaBcLwrk+2/5gx6lHgDQgnUL9K8ZQUXK2syFSavTucFnINSnaXTZA+5w9VIFg18gkAvVVFtTmndkSyhM8XC4MJQIN1M2DaDmf6dTk2JUh86gBqwOE6bj10IL8lvvbd0w7CBOfGYaLSW7YwNjVMBTJM3TVH4yYCA+Cc3XIdBNZGRkYZEsX1ZHr61sTmUBDdeVgaicYpHGs8LmiDZ0ADQA0YBM5xa3vxBGo3z/gAjAEm+j/OjVpZGOtYaSu/BcgoocozvTLusuDJdCYewqWaIYU2mqhxSDiqhcNHcIHYphmaBe6axsUcr1KDYpyoHDghULGGG003g02KIV0/gBzfq4ojLhLCmOTgUzPFIbsLQxTYvQXfimUwzLGCaSSBih0Ikv5HTQc5MuTpS70YY/tLms6ipmnDx0knngWNd52HdJPxKaxb5eGTnaQFJoSy9t6dw+eRS00zgffIkEn7cP8VAQ8i9oIDkHt1wRN4HcLcwFYFj2ZVRP/AJUPXfJhbUz2B55F7YT3oLQ6fHgEI9hmrI1nUUs5Z5ghdhUvZRW9rfZvUGW6bzmKefesG9sIiD2dY96Qn7SWAubdJWvZSiFvATacLaOGZdHUXscNMNrOAWaBYAvgCbSYb4bivXM6DbPeVuZjWfTTptyGHPDZIsTEhQ3GibirTR82m4e1RYrS278tCNOICzrZ7TEJovS3FgML98x7+Wxc1FQP5xxAPc1FskCA2GCH7AvYHdxZfvYH9N8lVwdxfdP5NTbwa91Jg2N3qWuzV5vIsqj1DBdDD/yP0frSLreDxg+CBLm+FEWNyeZs7A7aJxBTa9eaf5A9e3MTsbfWXaQoIYl/NbSt1OqzBLro34fH8BoCwoITU2VRLIFO6uQhADz+MyzgIBqSdCyBbnLMQMzt6g3eOTPyOJV8Ta/h6lEMLC69MSRa/yb0BUugoxw66goQKnBnxcDVLp8EYjAYr5FjeZk2m3KFQM6yr3hRF48FfnXlng3/wBLo7BIAMilJF/zv9v+aro1fAjGefyI/QDbVUvpMMZ7L2mMMWFDlhPpLRyawBDq8LoY9FYScFgRvNMo+fBP4kN6mFe9wjUwsiSXQZTfwot4maK+q9o1gCXRaHY+tVSRxgr3MFLOy0v0l1wSiRyob2LgBinZNRyTP9f0G/MTM4cDQu5rCkClchz/o9eI4bp/xeEbrF0ExlOYnDduYn2NjBbU6SGYPFaFmdWC/Nq76CZPBaptojkIlWUe2kM1P4CdQCjd4phDXzzMh+QYq+We/FJbofUlWqBLN8EshtrHOUwbkKyjoRK8Ukuhs7uJxiQoFUl4pxEtw+ZkRsonVXR6fFJI7YgX8h2tcVU7TeqSQtNwskiGkcKmy2vdIIbkPXqgHSMvUqnWf/igkAehiXR7gr1btA+KPQtLB506wkLRcqxiG57wnNVS8PkPu2t6txyefoxqfdpumUG1eEoFO7/olxFEfV5rJF0ij3hIeKeE1Tw1rKqHygjF546t/WxXQ++ClchK0v2NdXwa8glbNldwQ0gx4b7m8Rxeku2tZj4iWZBvppGgN5Omf8pWHlLVdXg+uCtolrELajOru+kobuhVVBL/wGLCfBln3Qesh0kolnUItRT0Fao9WlVW8fUNVxqqO7zwKD95WPkv0KG7q9+RxQDv1KQSxaU/RpfvuPHdAXpNTuncXr+pMYkAJHCvdbRCkTb1IpASqXgUXehwt63MWhR1Uz1oLD/x9+enfKiNO6cI0ilmEVlyneuhF8TKqlllJDVsvPeskiOXjmk1fngUS/T9DLrYh1O5qI74c46ZKNB/iI1gG4ixi37+pT60RiDxlpKZZfFrFzgXzUojE++CGImXid/N2GKUXQox1lhIlamPqI3gTSMsw1zqLaVHpslrtgkS6Bmc0vCK/q7Vwu42B1E/Z9FmR+3C+u9T+ifxinfGizq58IfvZyN2MEoglWdcYWxDobfkh+JObKBzzwvfSzl13JgO6tNA+R0CSytMaFKIUTFPcxtSuvzHZMnNaZJ1IfBDm94Pao7HLPZ6cWrWpAjZXb4lGlj77aiphH/HdmVcdTVmy/eDkoPK/LRlPv1geTeqOeJSyszy7eZ+CeU71Fx1TgnWSV9Xh7OpGMMtZwfta/0RGB/Yc/GDm0lB8ZQ/JGR8jHSKjNSetf7F17ZbKrzb84XM+UfnaQTJLc8d0IWGkBbHPhv998fWkSgC5nRw41f5Hn7sWxwRxcSHbaTvLuveDOu3XQUd8O0/A3F9oKLpfyvbxtB6+xhzXtqIkm72Jr1kx9Hl5wegPoeyZ8nj/fNnupm9nTHfbj5RtRSvjdPCfLYnnedJdH5tRPRJerQHzZrwBfDRrVK30aq629B9O3/7CsjzagyJxXxX9rB7sKSAa3ReMZfCpZRZZRjja3aegELtRXfKwuYibHVXBs1kM/eq+8oiGnbQydVmNeZNFMDl2PsqoyvHLYjSppWApg1aYDOZvLxuu9d4+3T4dBpPwP0scwWMv7CbNYXYcrUfHbJhMojB2RNn/AYQ/sapbIQFwAAAAAElFTkSuQmCC",
    answers: {
      vthrdm985a262al8qx3do: "optionOne",
      xj352vofupe1dqz9emx13r: "optionTwo",
    },
    questions: ["loxhs1bqm25b708cmbf3g", "vthrdm985a262al8qx3do"],
  },
  johndoe: {
    id: "johndoe",
    name: "John Doe",
    avatarURL:
      "https://www.google.com/search?q=picture+3&sxsrf=ALeKk02vzXi1TcfLbOJt5upf-GGyggBvpg:1586530153251&source=lnms&tbm=isch&sa=X&ved=2ahUKEwjn0daxjd7oAhU9SxUIHXsMByAQ_AUoAXoECCAQAw&biw=1920&bih=937#imgrc=G6Wt4zKMbDjp8M",
    answers: {
      xj352vofupe1dqz9emx13r: "optionOne",
      vthrdm985a262al8qx3do: "optionTwo",
      "6ni6ok3ym7mf1p33lnez": "optionTwo",
    },
    questions: ["6ni6ok3ym7mf1p33lnez", "xj352vofupe1dqz9emx13r"],
  },
};

let questions = {
  "8xf0y6ziyjabvozdd253nd": {
    id: "8xf0y6ziyjabvozdd253nd",
    author: "sarahedo",
    timestamp: 1467166872634,
    optionOne: {
      votes: ["sarahedo"],
      text: "have horrible short term memory",
    },
    optionTwo: {
      votes: [],
      text: "have horrible long term memory",
    },
  },
  "6ni6ok3ym7mf1p33lnez": {
    id: "6ni6ok3ym7mf1p33lnez",
    author: "johndoe",
    timestamp: 1468479767190,
    optionOne: {
      votes: [],
      text: "become a superhero",
    },
    optionTwo: {
      votes: ["johndoe", "sarahedo"],
      text: "become a supervillain",
    },
  },
  am8ehyc8byjqgar0jgpub9: {
    id: "am8ehyc8byjqgar0jgpub9",
    author: "sarahedo",
    timestamp: 1488579767190,
    optionOne: {
      votes: [],
      text: "be telekinetic",
    },
    optionTwo: {
      votes: ["sarahedo"],
      text: "be telepathic",
    },
  },
  loxhs1bqm25b708cmbf3g: {
    id: "loxhs1bqm25b708cmbf3g",
    author: "tylermcginnis",
    timestamp: 1482579767190,
    optionOne: {
      votes: [],
      text: "be a front-end developer",
    },
    optionTwo: {
      votes: ["sarahedo"],
      text: "be a back-end developer",
    },
  },
  vthrdm985a262al8qx3do: {
    id: "vthrdm985a262al8qx3do",
    author: "tylermcginnis",
    timestamp: 1489579767190,
    optionOne: {
      votes: ["tylermcginnis"],
      text: "find $50 yourself",
    },
    optionTwo: {
      votes: ["johndoe"],
      text: "have your best friend find $500",
    },
  },
  xj352vofupe1dqz9emx13r: {
    id: "xj352vofupe1dqz9emx13r",
    author: "johndoe",
    timestamp: 1493579767190,
    optionOne: {
      votes: ["johndoe"],
      text: "write JavaScript",
    },
    optionTwo: {
      votes: ["tylermcginnis"],
      text: "write Swift",
    },
  },
};

function generateUID() {
  return (
    Math.random().toString(36).substring(2, 15) +
    Math.random().toString(36).substring(2, 15)
  );
}

export function _getUsers() {
  return new Promise((res, rej) => {
    setTimeout(() => res({ ...users }), 1000);
  });
}

export function _getQuestions() {
  return new Promise((res, rej) => {
    setTimeout(() => res({ ...questions }), 1000);
  });
}

function formatQuestion({ optionOneText, optionTwoText, author }) {
  return {
    id: generateUID(),
    timestamp: Date.now(),
    author,
    optionOne: {
      votes: [],
      text: optionOneText,
    },
    optionTwo: {
      votes: [],
      text: optionTwoText,
    },
  };
}

export function _saveQuestion(question) {
  return new Promise((res, rej) => {
    const authedUser = question.author;
    const formattedQuestion = formatQuestion(question);

    setTimeout(() => {
      questions = {
        ...questions,
        [formattedQuestion.id]: formattedQuestion,
      };

      users = {
        ...users,
        [authedUser]: {
          ...users[authedUser],
          questions: users[authedUser].questions.concat([formattedQuestion.id]),
        },
      };

      res(formattedQuestion);
    }, 1000);
  });
}

export function _saveQuestionAnswer({ authedUser, qid, answer }) {
  return new Promise((res, rej) => {
    setTimeout(() => {
      users = {
        ...users,
        [authedUser]: {
          ...users[authedUser],
          answers: {
            ...users[authedUser].answers,
            [qid]: answer,
          },
        },
      };

      questions = {
        ...questions,
        [qid]: {
          ...questions[qid],
          [answer]: {
            ...questions[qid][answer],
            votes: questions[qid][answer].votes.concat([authedUser]),
          },
        },
      };

      res();
    }, 500);
  });
}
